(()=>{"use strict";var e={8622:function(e,t,a){a.d(t,{useTaskManager:function(){return p}});var r=a(1578),l=a(4094);let o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=Date.now();return{id:e.id||a+t,title:e.title||"",description:e.description||"",updateTime:e.updateTime||a,completedTime:e.completedTime||0,reminderTime:e.reminderTime||void 0,reminderEnabled:e.reminderEnabled||!1,reminderType:e.reminderType||"hour",reminderShown:e.reminderShown||!1,reminderShownTime:e.reminderShownTime||void 0}},n=e=>e&&"object"==typeof e&&e.id&&"number"==typeof e.id,[i,s]=(0,l.Rr)("new-tab.task-list",{defaultValue:[]}),u=(0,r.Fl)(()=>{try{var e,t;return(null===(t=i.value)||void 0===t?void 0:null===(e=t.filter(e=>!e.completedTime))||void 0===e?void 0:e.length)||0}catch(e){return console.error("\u8BA1\u7B97\u672A\u5B8C\u6210\u4EFB\u52A1\u6570\u91CF\u65F6\u51FA\u9519:",e),0}}),c=(0,r.Fl)(()=>{try{var e;return(null===(e=i.value)||void 0===e?void 0:e.filter(e=>!e.completedTime))||[]}catch(e){return console.error("\u83B7\u53D6\u672A\u5B8C\u6210\u4EFB\u52A1\u5217\u8868\u65F6\u51FA\u9519:",e),[]}}),d=e=>{try{let t=o(e);s(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=e.findIndex(e=>e.id===t.id);return -1!==a?e[a]=t:e.push(t),[...e]})}catch(e){console.error("\u4FDD\u5B58\u4EFB\u52A1\u65F6\u51FA\u9519:",e)}},m=e=>{try{s(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=t.findIndex(t=>t.id===e);return -1!==a&&(t[a]={...t[a],completedTime:Date.now()}),[...t]})}catch(e){console.error("\u5B8C\u6210\u4EFB\u52A1\u65F6\u51FA\u9519:",e)}},v=()=>{try{let e={id:Date.now(),title:"",description:"",completedTime:0},t=o(e);delete t.updateTime,s(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[...e,t]})}catch(e){console.error("\u6DFB\u52A0\u4EFB\u52A1\u65F6\u51FA\u9519:",e)}},w=e=>{try{s(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.filter(t=>t.id!==e)})}catch(e){console.error("\u5220\u9664\u4EFB\u52A1\u65F6\u51FA\u9519:",e)}},g=e=>{try{s(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=t.findIndex(t=>t.id===e);if(-1!==a){let e=t[a];t[a]={...e,reminderShown:!1,reminderShownTime:void 0},console.log("\u5DF2\u91CD\u7F6E\u4EFB\u52A1\u63D0\u9192:",e.title)}return[...t]})}catch(e){console.error("\u91CD\u7F6E\u4EFB\u52A1\u63D0\u9192\u65F6\u51FA\u9519:",e)}},h=()=>{try{if(!Array.isArray(i.value)){console.warn("\u4EFB\u52A1\u5217\u8868\u6570\u636E\u683C\u5F0F\u9519\u8BEF\uFF0C\u91CD\u7F6E\u4E3A\u7A7A\u6570\u7EC4"),s([]);return}let e=i.value.map((e,t)=>o(e,t)).filter(n);s(e),console.log(`\u{5DF2}\u{6807}\u{51C6}\u{5316} ${e.length} \u{4E2A}\u{4EFB}\u{52A1}`)}catch(e){console.error("\u521D\u59CB\u5316\u4EFB\u52A1\u5217\u8868\u65F6\u51FA\u9519:",e),s([])}},f=()=>{try{let e=localStorage.getItem("new-tab.task-list");if(!e)return console.log("\u6CA1\u6709\u627E\u5230\u4EFB\u52A1\u6570\u636E"),[];let t=JSON.parse(e);if(!Array.isArray(t))return console.warn("\u4EFB\u52A1\u6570\u636E\u683C\u5F0F\u9519\u8BEF\uFF0C\u91CD\u7F6E\u4E3A\u7A7A\u6570\u7EC4"),s([]),[];let a=t.map((e,t)=>o(e,t)).filter(n);return s(a),console.log(`\u{5DF2}\u{4FEE}\u{590D}\u{5E76}\u{6807}\u{51C6}\u{5316} ${a.length} \u{4E2A}\u{4EFB}\u{52A1}:`,a),a}catch(e){return console.error("\u4FEE\u590D\u6570\u636E\u5931\u8D25:",e),s([]),[]}},p=()=>({taskList:i,unCompletedTaskCount:u,unCompletedTaskList:c,handleSaveTask:d,handleCompleteTask:m,handleAddTask:v,handleDeleteTask:w,resetTaskReminder:g,initializeTaskList:h,fixCorruptedTasks:f,normalizeTaskItem:o,isValidTaskItem:n})},7884:function(e,t,a){let r,l;var o,n,i,s,u,c,d,m=a("8026"),v=a.n(m),w=a("903"),g=a.n(w),h=a("1578"),f=a("8338"),p=a("7916"),y=a("1816"),b=a("2775"),S=a("4702"),_=a("4094"),k=a("8861");let U=async e=>{try{let t=await fetch("https://raw.githubusercontent.com/double2kill/new-tab-extension/master/manifest.json");if(!t.ok)throw Error(`GitHub manifest error: ${t.status}`);let a=(await t.json()).version;return{hasUpdate:x(a,e)>0,latestVersion:a,currentVersion:e,releaseUrl:"https://github.com/double2kill/new-tab-extension",publishedAt:new Date().toISOString()}}catch(t){return console.error("\u68C0\u67E5\u66F4\u65B0\u5931\u8D25:",t),{hasUpdate:!1,latestVersion:e,currentVersion:e,releaseUrl:"",publishedAt:""}}},x=(e,t)=>{let a=e.split(".").map(Number),r=t.split(".").map(Number);for(let e=0;e<Math.max(a.length,r.length);e++){let t=a[e]||0,l=r[e]||0;if(t>l)return 1;if(t<l)return -1}return 0},C=()=>{try{let e=localStorage.getItem("new-tab.update-info");return e?JSON.parse(e):null}catch{return null}},T=e=>{try{localStorage.setItem("new-tab.update-info",JSON.stringify(e))}catch(e){console.error("\u4FDD\u5B58\u66F4\u65B0\u4FE1\u606F\u5931\u8D25:",e)}},D=e=>((0,h.dD)("data-v-7c33ed5a"),e=e(),(0,h.Cn)(),e),L={class:"py-5"},W={class:"text-center mb-8 p-5 bg-gradient-to-br from-gray-50 to-blue-100 rounded-2xl shadow-lg"},Z=D(()=>(0,h._)("div",{class:"mb-4 text-blue-500"},[(0,h._)("svg",{viewBox:"0 0 24 24",width:"48",height:"48",fill:"currentColor"},[(0,h._)("path",{d:"M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4M12,6A6,6 0 0,0 6,12A6,6 0 0,0 12,18A6,6 0 0,0 18,12A6,6 0 0,0 12,6M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8Z"})])],-1)),I=D(()=>(0,h._)("div",{class:"text-3xl font-bold text-gray-800 mb-2 tracking-tight"},"New Tab Extension",-1)),z={class:"my-3 flex flex-col gap-1.5 items-center"},H={class:"text-lg text-gray-600 font-mono font-semibold bg-white/80 px-3 py-1 rounded-full inline-block my-2"},M={class:"flex items-center gap-2 text-xs text-gray-500 bg-white/60 px-2.5 py-1 rounded-xl backdrop-blur-sm"},A=D(()=>(0,h._)("span",{class:"font-semibold text-gray-600"},"Build:",-1)),N={class:"font-mono font-medium text-gray-800"},P={key:0,class:"bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl p-5 mb-6 text-white text-center shadow-xl relative overflow-hidden"},j=D(()=>(0,h._)("div",{class:"absolute inset-0 bg-gradient-to-br from-blue-500 to-purple-600 opacity-10 animate-pulse"},null,-1)),B={class:"mb-3 relative z-10"},E=D(()=>(0,h._)("div",{class:"text-base font-bold mb-2 text-white drop-shadow"},"\u6709\u65B0\u7248\u672C\u53EF\u7528",-1)),F={class:"mb-3"},R={class:"text-sm mb-1 opacity-95 font-medium"},V={class:"text-xs opacity-85"},O=D(()=>(0,h._)("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor"},[(0,h._)("path",{d:"M14,3V7H17.59L7.76,16.83L9.17,18.24L19,8.41V12H23V3M19,19H5V5H12V1H5A2,2 0 0,0 3,3V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z"})],-1)),q={class:"bg-gradient-to-br from-green-50 to-emerald-100 rounded-2xl p-5 text-center shadow-lg"},$=D(()=>(0,h._)("div",{class:"mb-3"},[(0,h._)("div",{class:"text-base font-bold mb-2 text-gray-800"},"\u6570\u636E\u7BA1\u7406"),(0,h._)("div",{class:"text-sm text-gray-600 mb-4"},"\u5BFC\u51FA\u6269\u5C55\u7684\u6240\u6709\u672C\u5730\u5B58\u50A8\u6570\u636E")],-1)),Y={class:"flex gap-3 justify-center"},J=D(()=>(0,h._)("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor"},[(0,h._)("path",{d:"M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"})],-1)),K=D(()=>(0,h._)("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor"},[(0,h._)("path",{d:"M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"})],-1)),G=(0,h.aZ)({__name:"About",emits:["update-status"],setup(e,t){let{expose:a,emit:r}=t,l=(0,h.iH)(!1),o=(0,h.iH)(!1),n=(0,h.iH)(null),i="1.1.4",s=async()=>{l.value=!0,await u()},u=async()=>{let e=await U(i);o.value=e.hasUpdate,n.value=e,T(e),localStorage.setItem("new-tab.last-update-check",Date.now().toString()),r("update-status",o.value)},c=()=>{var e;(null===(e=n.value)||void 0===e?void 0:e.releaseUrl)&&window.open(n.value.releaseUrl,"_blank")},d=()=>{let e={};for(let t=0;t<localStorage.length;t++){let a=localStorage.key(t);if(a)try{e[a]=JSON.parse(localStorage.getItem(a)||"")}catch{e[a]=localStorage.getItem(a)}}let t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),a=URL.createObjectURL(t),r=document.createElement("a");r.href=a,r.download=`new-tab-extension-data-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(a)},m=()=>{let e=document.createElement("input");e.type="file",e.accept=".json",e.onchange=e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(a){let e=new FileReader;e.onload=e=>{try{var t;let a=JSON.parse(null===(t=e.target)||void 0===t?void 0:t.result);Object.keys(a).forEach(e=>{"object"==typeof a[e]?localStorage.setItem(e,JSON.stringify(a[e])):localStorage.setItem(e,String(a[e]))}),alert("\u6570\u636E\u5BFC\u5165\u6210\u529F\uFF01"),location.reload()}catch(e){alert("\u5BFC\u5165\u5931\u8D25\uFF1A\u6587\u4EF6\u683C\u5F0F\u9519\u8BEF")}},e.readAsText(a)}},e.click()};return(0,h.bv)(()=>{let e=C();e&&(o.value=e.hasUpdate,n.value=e,r("update-status",o.value))}),a({openAbout:s,hasUpdate:o}),(e,t)=>((0,h.wg)(),(0,h.j4)((0,h.SU)(k.Z),{show:l.value,"onUpdate:show":t[0]||(t[0]=e=>l.value=e),preset:"card",title:"\u5173\u4E8E",style:{width:"600px"}},{default:(0,h.w5)(()=>{var e,t;return[(0,h._)("div",L,[(0,h._)("div",W,[Z,I,(0,h._)("div",z,[(0,h._)("div",H," v"+(0,h.zw)((0,h.SU)(i)),1),(0,h._)("div",M,[A,(0,h._)("span",N,(0,h.zw)((0,h.SU)("2025/08/05 14:18:43")),1)])])]),o.value?((0,h.wg)(),(0,h.iD)("div",P,[j,(0,h._)("div",B,[E,(0,h._)("div",F,[(0,h._)("div",R," \u6700\u65B0\u7248\u672C: v"+(0,h.zw)(null===(e=n.value)||void 0===e?void 0:e.latestVersion),1),(0,h._)("div",V," \u53D1\u5E03\u65F6\u95F4: "+(0,h.zw)(new Date(null===(t=n.value)||void 0===t?void 0:t.publishedAt).toLocaleDateString("zh-CN")),1)])]),(0,h._)("button",{onClick:c,class:"update-button bg-white/20 border border-white/30 text-white backdrop-blur-lg transition-all duration-300 relative z-10 px-3 py-1.5 rounded-md text-sm cursor-pointer inline-flex items-center gap-1"},[O,(0,h.Uk)(" \u67E5\u770B\u66F4\u65B0 ")])])):(0,h.kq)("",!0),(0,h._)("div",q,[$,(0,h._)("div",Y,[(0,h.Wm)((0,h.SU)(S.ZP),{onClick:d,type:"success",ghost:"",size:"medium",class:"export-button"},{icon:(0,h.w5)(()=>[J]),default:(0,h.w5)(()=>[(0,h.Uk)(" \u5BFC\u51FA\u6570\u636E ")]),_:1}),(0,h.Wm)((0,h.SU)(S.ZP),{onClick:m,type:"info",ghost:"",size:"medium",class:"import-button"},{icon:(0,h.w5)(()=>[K]),default:(0,h.w5)(()=>[(0,h.Uk)(" \u5BFC\u5165\u6570\u636E ")]),_:1})])])])]}),_:1},8,["show"]))}});var Q=a("1068");let X=(0,Q.default)(G,[["__scopeId","data-v-7c33ed5a"]]),ee={class:"search-container"},et={class:"custom-search-input"},ea=["placeholder"];let er=[(r=()=>(0,h._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[(0,h._)("circle",{cx:"11",cy:"11",r:"8"}),(0,h._)("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})],-1),(0,h.dD)("data-v-21d0695b"),r=r(),(0,h.Cn)(),r)],el=(0,h.aZ)({__name:"GoogleSearch",props:{placeholder:{type:String,default:"Google \u641C\u7D22..."}},emits:["focus-change"],setup(e,t){let{emit:a}=t,r=(0,h.iH)(""),l=(0,h.iH)(!1);(0,h.YP)(l,e=>{a("focus-change",e)});let o=()=>{if(r.value.trim()){let e=`https://www.google.com/search?q=${encodeURIComponent(r.value)}`;window.open(e,"_blank"),r.value=""}};return(t,a)=>((0,h.wg)(),(0,h.iD)("div",ee,[(0,h._)("div",et,[(0,h.wy)((0,h._)("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>r.value=e),type:"text",placeholder:e.placeholder,onFocus:a[1]||(a[1]=e=>l.value=!0),onBlur:a[2]||(a[2]=e=>l.value=!1),onKeydown:(0,h.D2)(o,["enter"])},null,40,ea),[[h.nr,r.value]]),(0,h._)("button",{class:"search-button",onClick:o},er)])]))}}),eo=(0,Q.default)(el,[["__scopeId","data-v-21d0695b"]]);var en=a("6813"),ei=a("4163"),es=a("9107"),eu=a("4161"),ec=a("1712"),ed=a("6056");let em=window.chrome&&window.chrome.storage,ev={set(e,t){t="object"==typeof t?JSON.stringify(t):t,window.localStorage.setItem(e,t)},async get(e){let t=window.localStorage.getItem(e);try{return JSON.parse(t)}catch(e){return t}}},ew=(e,t)=>{em?window.chrome.storage.local.set({[e]:t}):ev.set(e,t)},eg=e=>em?new Promise(t=>{window.chrome.storage.local.get([e],a=>{t(a[e])})}):ev.get(e),eh=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=(0,h.iH)(t.default);return(0,h.bv)(async()=>{var r;let l=await eg(e)??t.chromeDefault??t.default;a.value=l,null===(r=t.onMounted)||void 0===r||r.call(t,l)}),[a,function(t){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];!r&&(a.value=t),ew(e,t)}]};var ef=a("7515"),ep=a("2995");async function ey(){try{var e;let t=(await navigator.mediaDevices.enumerateDevices()).filter(e=>"audiooutput"===e.kind).find(e=>"default"===e.deviceId),a=(null==t?void 0:null===(e=t.label)||void 0===e?void 0:e.toLowerCase())||"";return a.includes("bluetooth")||a.includes("headphones")}catch(e){return console.error("\u83B7\u53D6\u97F3\u9891\u8BBE\u5907\u5931\u8D25\uFF1A",e),!1}}let eb=async e=>{let t=await eg("NEW_TAB_TTS_ACCESS_TOKEN");if(!t)return;if(!await ey()){console.log("\u6CA1\u6709\u68C0\u6D4B\u5230\u84DD\u7259\u8033\u673A\u6216\u8033\u673A\u8BBE\u5907");return}let a=(0,ep.Z)(),r=await ef.Z.post("http://tts.greatwebtech.cn/api/v1/tts",{app:{appid:"9751273055",token:t,cluster:"volcano_tts"},user:{uid:"2109425105"},audio:{voice_type:"BV001_streaming",encoding:"mp3",compression_rate:1,rate:24e3,speed_ratio:1,volume_ratio:1,pitch_ratio:1,emotion:"happy",language:"cn"},request:{reqid:a,text:e,text_type:"plain",operation:"query",silence_duration:"125",with_frontend:"1",frontend_type:"unitTson",pure_english_opt:"1"}},{headers:{Authorization:`Bearer;${t}`}});return!function(e){let t=atob(e),a=t.length,r=new Uint8Array(a);for(let e=0;e<a;e++)r[e]=t.charCodeAt(e);let l=new Blob([r.buffer],{type:"audio/mpeg"}),o=new Audio(URL.createObjectURL(l));o.volume=.5,o.play()}(r.data.data),r.data};var eS=a("1630");(o=u||(u={})).GLM_4_Flash="glm-4-flash",o.GLM_4_Assistant="glm-4-assistant",o.GLM_4="glm-4";let e_=async function(e){var t;let{model:a="glm-4-flash"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=await eg("NEW_TAB_ZHI_PU_API_KEY"),l=new eS.ZP({baseURL:"https://open.bigmodel.cn/api/paas/v4/",apiKey:r,dangerouslyAllowBrowser:!0});return null===(t=(await l.chat.completions.create({model:a,messages:e})).choices[0].message)||void 0===t?void 0:t.content},ek={key:0,class:"flex flex-col gap-4 relative backface-hidden"},eU=(0,h._)("div",{class:"h-full w-full"},[(0,h._)("div",{class:"font-size-5"},"\u5B66\u5355\u8BCD")],-1),ex={class:"whitespace-pre w-full font-size-6 font-bold"},eC={key:1},eT={class:"flex gap-2 justify-center"},eD=(0,h._)("span",{class:"font-size-3"},"\u6717\u8BFB",-1),eL=(0,h._)("span",{class:"font-size-3"},"\u67E5\u770B\u7FFB\u8BD1",-1),eW=(0,h._)("span",{class:"font-size-3"},"\u5237\u65B0",-1),eZ={key:1,class:"backface-hidden transform-rotate-y-180"},eI=(0,h._)("div",{class:"h-full w-full"},[(0,h._)("div",{class:"font-size-5"},"\u7FFB\u8BD1")],-1),ez={class:"m-y-8 font-size-4 transition-height duration-300"},eH={else:""},eM=(0,h._)("span",{class:"font-size-3"},"\u67E5\u770B\u5355\u8BCD",-1),eA=(0,h.aZ)({__name:"LearnCard",setup(e){let t=(0,h.iH)(!1),a=(0,h.iH)(!1);(0,h.YP)(t,e=>{setTimeout(()=>{a.value=e},400)});let[r]=eh("NEW_TAB_ZHI_PU_API_KEY",{default:"",chromeDefault:""}),[l,o]=eh("NEW_TAB_LEARN_HISTORY",{default:[]}),n=["\u8BF7\u518D\u968F\u673A\u751F\u6210\u4E00\u4E2A\u82F1\u8BED\u5355\u8BCD\u3002","\u8BF7\u518D\u751F\u6210\u4E00\u4E2A3\u52305\u4E2A\u5B57\u6BCD\u7684\u82F1\u8BED\u5355\u8BCD\u3002","\u8BF7\u518D\u63D0\u4F9B\u4E00\u4E2A\u81F3\u5C117\u4E2A\u5B57\u6BCD\u7684\u82F1\u8BED\u5355\u8BCD\u3002","\u8BF7\u518D\u751F\u6210\u4E00\u4E2A\u62BD\u8C61\u7684\u82F1\u8BED\u5355\u8BCD\u3002","\u8BF7\u518D\u751F\u6210\u4E00\u4E2A\u82F1\u8BED\u4E13\u6709\u540D\u8BCD\u3002","\u8BF7\u518D\u751F\u6210\u4E00\u4E2A\u5E26\u6709\u6B63\u9762\u60C5\u611F\u7684\u82F1\u8BED\u5355\u8BCD\u3002","\u6211\u8FD8\u9700\u8981\u4E00\u4E2A\u5E26\u6709\u8D1F\u9762\u60C5\u611F\u7684\u82F1\u8BED\u5355\u8BCD\u3002","\u8BF7\u518D\u751F\u6210\u4E00\u4E2A\u5E26\u6709\u4E2D\u6027\u60C5\u611F\u7684\u82F1\u8BED\u5355\u8BCD\u3002","\u8BF7\u518D\u751F\u6210\u4E00\u4E2A\u5E26\u6709\u79D1\u6280\u611F\u7684\u82F1\u8BED\u5355\u8BCD\u3002","\u8BF7\u518D\u751F\u6210\u4E00\u4E2A\u5E26\u6709\u827A\u672F\u611F\u7684\u82F1\u8BED\u5355\u8BCD\u3002","\u8BF7\u518D\u751F\u6210\u4E00\u4E2A\u96C5\u601D\u8BCD\u6C47\u8868\u4E2D\u7684\u82F1\u8BED\u5355\u8BCD","\u8BF7\u518D\u751F\u6210\u4E00\u4E2A\u6258\u798F\u8BCD\u6C47\u8868\u4E2D\u7684\u82F1\u8BED\u5355\u8BCD","\u8BF7\u518D\u751F\u6210\u4E00\u4E2AGRE\u8BCD\u6C47\u8868\u4E2D\u7684\u82F1\u8BED\u5355\u8BCD","\u8BF7\u518D\u751F\u6210\u4E00\u4E2A\u8003\u7814\u8BCD\u6C47\u8868\u4E2D\u7684\u82F1\u8BED\u5355\u8BCD","\u8BF7\u518D\u751F\u6210\u4E00\u4E2A\u9AD8\u4E2D\u8BCD\u6C47\u8868\u4E2D\u7684\u82F1\u8BED\u5355\u8BCD"],i=e=>{if(!!e)o([...l.value,{text:e,addedTime:Date.now()}])},{data:s,loading:u,refresh:c}=(0,_.QT)(async()=>{if(!r.value)return;await new Promise(e=>setTimeout(e,100));let e=await e_([{role:"system",content:"\u4F60\u662F\u4E00\u4E2A\u7B80\u5355\u7684\u5355\u8BCD\u751F\u6210\u52A9\u624B\uFF0C\u6BCF\u6B21\u53EA\u9700\u8981\u968F\u673A\u751F\u6210\u4E00\u4E2A\u65B0\u7684\u82F1\u8BED\u5355\u8BCD, \u4E0D\u80FD\u548C\u5B66\u8FC7\u7684\u91CD\u590D"},{role:"user",content:"\u8FD9\u4E9B\u662F\u6211\u5B66\u8FC7\u7684\u5355\u8BCD"+l.value.map(e=>e.text).join(",")+function(e){let t=Math.floor(Math.random()*e.length);return e[t]}(n)+"\n"}]);return i(e),e},{refreshDeps:[r]}),{data:d,loading:m}=(0,_.QT)(async()=>{if(!!r.value)return e_([{role:"system",content:"\u8BF7\u5C06\u8BE5\u5355\u8BCD\u7FFB\u8BD1\u4E3A\u4E2D\u6587"},{role:"user",content:s.value}])},{refreshDeps:[s]}),[v]=eh("NEW_TAB_TTS_ACCESS_TOKEN",{default:"",chromeDefault:""}),w=async e=>{if(!!e)eb(e)};return(e,l)=>(0,h.SU)(r)?((0,h.wg)(),(0,h.iD)("div",{key:0,class:(0,h.C_)(["word-card max-w-100 m-x-[auto] p-4 preserve-3d transition-all duration-1000",{"transform-rotate-y-180":t.value}])},[a.value?((0,h.wg)(),(0,h.iD)("div",eZ,[eI,(0,h._)("div",ez,[(0,h.SU)(m)?((0,h.wg)(),(0,h.j4)((0,h.SU)(eu.Z),{key:0})):(0,h.kq)("",!0),(0,h._)("span",eH,(0,h.zw)((0,h.SU)(d)),1)]),(0,h._)("div",{class:"m-x-auto m-t-2 hover-color-[#18a058] cursor-pointer flex justify-center items-center gap-2 font-size-4",onClick:l[3]||(l[3]=()=>{t.value=!t.value})},[(0,h.Wm)((0,h.SU)(ec.g),null,{default:(0,h.w5)(()=>[(0,h.Wm)((0,h.SU)(es.Z))]),_:1}),eM])])):((0,h.wg)(),(0,h.iD)("div",ek,[eU,(0,h._)("div",ex,[(0,h.SU)(u)?((0,h.wg)(),(0,h.j4)((0,h.SU)(eu.Z),{key:0})):((0,h.wg)(),(0,h.iD)("span",eC,(0,h.zw)((0,h.SU)(s)),1))]),(0,h._)("div",eT,[(0,h.SU)(v)?((0,h.wg)(),(0,h.iD)("span",{key:0,class:"m-t-2 hover-color-[#18a058] cursor-pointer inline-flex items-center gap-2 font-size-4",onClick:l[0]||(l[0]=e=>w((0,h.SU)(s)))},[(0,h.Wm)((0,h.SU)(ec.g),null,{default:(0,h.w5)(()=>[(0,h.Wm)((0,h.SU)(en.Z))]),_:1}),eD])):(0,h.kq)("",!0),(0,h._)("span",{class:"m-t-2 hover-color-[#18a058] cursor-pointer inline-flex items-center gap-2 font-size-4",onClick:l[1]||(l[1]=()=>{t.value=!t.value})},[(0,h.Wm)((0,h.SU)(ec.g),null,{default:(0,h.w5)(()=>[(0,h.Wm)((0,h.SU)(es.Z))]),_:1}),eL]),(0,h._)("span",{class:(0,h.C_)(["m-t-2 hover-color-[#18a058] cursor-pointer inline-flex items-center gap-2 font-size-4",{"pointer-events-none":(0,h.SU)(u)}]),onClick:l[2]||(l[2]=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,h.SU)(c)&&(0,h.SU)(c)(...t)})},[(0,h.Wm)((0,h.SU)(ec.g),null,{default:(0,h.w5)(()=>[(0,h.Wm)((0,h.SU)(ei.Z))]),_:1}),eW],2)])]))],2)):(0,h.kq)("",!0)}});var eN=a("3395"),eP=a("2381"),ej=a("4053"),eB=a("7276"),eE=a("2023"),eF=a("7251"),eR=a("89"),eV=a("8961"),eO=a("6135");let eq="thumbnails";function e$(){return new Promise((e,t)=>{let a=indexedDB.open("ThumbnailCacheDB",1);a.onupgradeneeded=function(e){let t=e.target.result;!t.objectStoreNames.contains(eq)&&t.createObjectStore(eq,{keyPath:"id"})},a.onsuccess=function(t){e(t.target.result)},a.onerror=function(e){t(e.target.error)}})}async function eY(e,t){let a=(await e$()).transaction(eq,"readwrite");return a.objectStore(eq).put({id:e,thumbnailData:t}),new Promise((e,t)=>{a.oncomplete=()=>e(""),a.onerror=e=>t(e.target.error)})}async function eJ(e){let t=(await e$()).transaction(eq,"readonly").objectStore(eq);return new Promise((a,r)=>{let l=t.get(e);l.onsuccess=()=>{var e;return a((null===(e=l.result)||void 0===e?void 0:e.thumbnailData)||"")},l.onerror=e=>r(e.target.error)})}async function eK(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:350,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,r=[e,t,a].join("_"),l=await eJ(r);if(l)return l;let o=await function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:350,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200;return new Promise((r,l)=>{let o=new Image;o.crossOrigin="anonymous",o.onload=function(){let e=document.createElement("canvas");e.width=t,e.height=a,e.getContext("2d").drawImage(o,0,0,t,a),r(e.toDataURL("image/png"))},o.onerror=e=>l(e),o.src=e})}(e,t,a);return await eY(r,o),o}let eG={class:"drawer-body"},eQ=["onClick","src"],eX=(0,h.aZ)({__name:"LikeImageList",props:{bgImgSrc:{},setBgImgSrc:{type:Function}},setup(e){let[t,a]=(0,_.Rr)("new-tab.list",{defaultValue:[]}),[r,l]=(0,_.Rr)("new-tab.fetch-background-image-date",{defaultValue:""}),[o,n]=(0,_.Rr)("new-tab.pick-from-like-list",{defaultValue:!1}),i=(0,h.iH)([]),s=(0,h.iH)([]),u=e=>{i.value=e,s.value=y(e),a(e.map(e=>e.url))};(0,h.bv)(async()=>{var e,a,r;if(!i.value||!((null===(e=i.value)||void 0===e?void 0:e.length)>0))(null===(a=t.value)||void 0===a?void 0:a.some(e=>"string"==typeof e))&&u(await Promise.all(null===(r=t.value)||void 0===r?void 0:r.map(async e=>{let t="string"==typeof e?e:e.url,a=await eK(t);return{url:t,thumbnailData:a}}))),await new Promise(e=>setTimeout(e,200)),c()});let c=async()=>{var t;let a=v()().format("YYYY-MM-DD");if(r.value===a&&e.bgImgSrc)return;let n=o.value?null===(t=function(e){if(0===e.length)return;let t=Math.floor(Math.random()*e.length);return e[t]}(i.value))||void 0===t?void 0:t.url:void 0;!n&&(n=await fetch("https://api.timelessq.com/bing").then(e=>e.url)),e.setBgImgSrc(n),l(a)},d=(0,h.iH)(!1),m=()=>{d.value=!0},w=async t=>{if(e.setBgImgSrc(t.url),!t.thumbnailData){let e=await eK(t.url),a=i.value?(0,h.IU)(i.value):[],r=a.find(e=>e.url===t.url);r&&(r.thumbnailData=e),u(a)}},g=async()=>{let t=await fetch("https://api.timelessq.com/bing/random").then(e=>e.url);e.setBgImgSrc(t)},f=async()=>{let{bgImgSrc:t}=e,a=i.value?(0,h.IU)(i.value):[];if(null==a?void 0:a.some(e=>(null==e?void 0:e.url)===t))a=a.filter(e=>(null==e?void 0:e.url)!==t);else{let e=await eK(t||"");a.push({url:t||"",thumbnailData:e||""})}u(a)},p=e=>{let t="string"==typeof e?e:e.url||"",a=i.value?(0,h.IU)(i.value):[];u(a=a.filter(e=>(null==e?void 0:e.url)!==t))},y=e=>{let t=[...e];return null==t?void 0:t.sort((t,a)=>e.indexOf(a)-e.indexOf(t))};return(e,t)=>((0,h.wg)(),(0,h.iD)(h.HY,null,[(0,h.Wm)((0,h.SU)(eB.Z),null,{default:(0,h.w5)(()=>[(0,h.Wm)((0,h.SU)(S.ZP),{round:"",type:"primary",onClick:m},{default:(0,h.w5)(()=>[(0,h.Uk)(" \u6536\u85CF\u5217\u8868 ")]),_:1}),(0,h.Wm)((0,h.SU)(eE.Z),{trigger:"hover"},{trigger:(0,h.w5)(()=>[(0,h.Wm)((0,h.SU)(S.ZP),{quaternary:"",circle:"",type:"success",onClick:f},{icon:(0,h.w5)(()=>[(0,h.Wm)((0,h.SU)(ec.g),{size:"30"},{default:(0,h.w5)(()=>{var t;return[(null===(t=i.value)||void 0===t?void 0:t.some(t=>(null==t?void 0:t.url)===e.bgImgSrc))?((0,h.wg)(),(0,h.j4)((0,h.SU)(eN.Z),{key:0})):((0,h.wg)(),(0,h.j4)((0,h.SU)(eP.Z),{key:1}))]}),_:1})]),_:1})]),default:(0,h.w5)(()=>{var t;return[(0,h.Uk)(" "+(0,h.zw)((null===(t=i.value)||void 0===t?void 0:t.some(t=>(null==t?void 0:t.url)===e.bgImgSrc))?"\u4E0D\u518D\u559C\u6B22":"\u559C\u6B22\u6B64\u80CC\u666F"),1)]}),_:1}),(0,h.Wm)((0,h.SU)(eE.Z),{trigger:"hover"},{trigger:(0,h.w5)(()=>[(0,h.Wm)((0,h.SU)(S.ZP),{quaternary:"",circle:"",type:"success",onClick:g},{icon:(0,h.w5)(()=>[(0,h.Wm)((0,h.SU)(ec.g),{size:"30"},{default:(0,h.w5)(()=>[(0,h.Wm)((0,h.SU)(ei.Z))]),_:1})]),_:1})]),default:(0,h.w5)(()=>[(0,h.Uk)(" \u968F\u673A\u80CC\u666F ")]),_:1})]),_:1}),(0,h.Wm)((0,h.SU)(eF.Z),{show:d.value,"onUpdate:show":t[1]||(t[1]=e=>d.value=e),"default-width":400,placement:"left",resizable:""},{default:(0,h.w5)(()=>[(0,h.Wm)((0,h.SU)(eR.Z),{title:"\u6536\u85CF\u5217\u8868"},{default:(0,h.w5)(()=>[(0,h._)("div",eG,[(0,h._)("div",null,[(0,h.Wm)((0,h.SU)(eV.Z),{checked:(0,h.SU)(o),"onUpdate:checked":t[0]||(t[0]=e=>(0,h.dq)(o)?o.value=e:null),onChange:(0,h.SU)(n)},{default:(0,h.w5)(()=>[(0,h.Uk)(" \u6BCF\u65E5\u5237\u65B0\u4ECE\u5217\u8868\u4E2D\u968F\u673A ")]),_:1},8,["checked","onChange"])]),((0,h.wg)(!0),(0,h.iD)(h.HY,null,(0,h.Ko)(s.value,(t,a)=>((0,h.wg)(),(0,h.j4)((0,h.SU)(eO.ZP),{key:a,hoverable:"",class:(0,h.C_)(["image-item",t.url===e.bgImgSrc?"active":""])},{cover:(0,h.w5)(()=>[(0,h._)("img",{onClick:e=>w(t),height:"200",src:t.thumbnailData||t.url,style:{cursor:"pointer"}},null,8,eQ)]),default:(0,h.w5)(()=>[(0,h.Wm)((0,h.SU)(S.ZP),{quaternary:"",circle:"",type:"success",onClick:e=>p(t)},{icon:(0,h.w5)(()=>[(0,h.Wm)((0,h.SU)(ec.g),{size:"20"},{default:(0,h.w5)(()=>[(0,h.Wm)((0,h.SU)(ej.Z))]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["class"]))),128))])]),_:1})]),_:1},8,["show"])],64))}});var e0=a("6276"),e1=a("5005"),e2=a("6639"),e4=a("2034"),e8=a("5234"),e5=a("6250"),e3=a("7821"),e6=a("5001"),e9=a("3163"),e7=a("6489");let te={key:0,class:"reminder-info"},tt={class:"reminder-display"},ta={class:"reminder-text"},tr={class:"reminder-overdue"},tl={class:"reminder-time"},to={class:"reminder-shown"},tn={key:0,class:"reminder-time"},ti={class:"reminder-countdown"},ts={class:"reminder-time"},tu=(0,h.aZ)({__name:"ReminderCountdown",props:{reminderTime:{},reminderEnabled:{type:Boolean},reminderShown:{type:Boolean},reminderShownTime:{}},setup(e){let t=(0,h.iH)(Date.now()),a=(0,h.Fl)(()=>{if(!e.reminderEnabled||!e.reminderTime)return null;if(e.reminderShown)return"\u5DF2\u63D0\u9192";let a=e.reminderTime-t.value;if(a<=0)return"\u5DF2\u8FC7\u671F";let r=Math.floor(a/6e4),l=Math.floor(r/60),o=Math.floor(l/24);return o>0?`${o}\u{5929}${l%24}\u{5C0F}\u{65F6}`:l>0?`${l}\u{5C0F}\u{65F6}${r%60}\u{5206}\u{949F}`:`${r}\u{5206}\u{949F}`}),r=e=>{let t=new Date(e),a=new Date;return t.toDateString()===a.toDateString()?t.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}):t.toLocaleString("zh-CN",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})},l=null;return(0,h.bv)(()=>{l=setInterval(()=>{t.value=Date.now()},6e4)}),(0,h.SK)(()=>{l&&(clearInterval(l),l=null)}),(e,t)=>e.reminderEnabled&&e.reminderTime?((0,h.wg)(),(0,h.iD)("div",te,[(0,h._)("div",tt,[(0,h.Wm)((0,h.SU)(ec.g),{size:"12",class:"reminder-icon"},{default:(0,h.w5)(()=>[(0,h.Wm)((0,h.SU)(e7.Z))]),_:1}),(0,h._)("span",ta,["\u5DF2\u8FC7\u671F"===a.value?((0,h.wg)(),(0,h.iD)(h.HY,{key:0},[(0,h._)("span",tr,(0,h.zw)(a.value),1),(0,h._)("span",tl,"("+(0,h.zw)(r(e.reminderTime))+")",1)],64)):"\u5DF2\u63D0\u9192"===a.value?((0,h.wg)(),(0,h.iD)(h.HY,{key:1},[(0,h._)("span",to,(0,h.zw)(a.value),1),e.reminderShownTime?((0,h.wg)(),(0,h.iD)("span",tn," ("+(0,h.zw)(r(e.reminderShownTime))+") ",1)):(0,h.kq)("",!0)],64)):((0,h.wg)(),(0,h.iD)(h.HY,{key:2},[(0,h._)("span",ti,(0,h.zw)(a.value)+"\u540E\u63D0\u9192",1),(0,h._)("span",ts,"("+(0,h.zw)(r(e.reminderTime))+")",1)],64))])])])):(0,h.kq)("",!0)}}),tc=(0,Q.default)(tu,[["__scopeId","data-v-3d117c1c"]]);var td=a("3427"),tm=a("6660");let tv={class:"reminder-editor"},tw={class:"quick-reminder-section"},tg={class:"quick-reminder-buttons"},th={class:"custom-reminder-section"},tf=(0,h.aZ)({__name:"ReminderEditor",props:{modelValue:{type:Boolean},reminderEnabled:{type:Boolean},reminderTime:{},reminderType:{}},emits:["update:modelValue","update:reminder","cancel"],setup(e,t){let{emit:a}=t,r=(0,h.iH)(null),l=(0,h.Fl)({get:()=>e.modelValue,set:e=>a("update:modelValue",e)}),o=e=>{let t,r;let o=Date.now();switch(e){case"hour":t=o+36e5,r="hour";break;case"2hour":t=o+72e5,r="hour";break;case"day":let n=new Date;n.setHours(23,59,59,999),t=n.getTime(),r="day"}a("update:reminder",{reminderTime:t,reminderEnabled:!0,reminderType:r}),l.value=!1},n=()=>{r.value&&(a("update:reminder",{reminderTime:r.value,reminderEnabled:!0,reminderType:"custom"}),l.value=!1)},i=()=>{a("cancel"),l.value=!1},s=()=>{e.reminderEnabled&&e.reminderTime?r.value=e.reminderTime:r.value=null},u=()=>{l.value&&s()};return(e,t)=>((0,h.wg)(),(0,h.j4)((0,h.SU)(y.ZP),{trigger:"click",placement:"bottom",show:l.value,"onUpdate:show":u},{trigger:(0,h.w5)(()=>[(0,h.Wm)((0,h.SU)(eE.Z),{trigger:"hover",placement:"top"},{trigger:(0,h.w5)(()=>[(0,h.Wm)((0,h.SU)(S.ZP),{size:"small",circle:"",class:(0,h.C_)(["action-btn","reminder-btn",{"reminder-active":e.reminderEnabled}]),onClick:t[0]||(t[0]=e=>l.value=!l.value)},{default:(0,h.w5)(()=>[(0,h.Wm)((0,h.SU)(ec.g),{size:"14"},{default:(0,h.w5)(()=>[(0,h.Wm)((0,h.SU)(e7.Z))]),_:1})]),_:1},8,["class"])]),default:(0,h.w5)(()=>[(0,h.Uk)(" "+(0,h.zw)(e.reminderEnabled?"\u7F16\u8F91\u63D0\u9192":"\u8BBE\u7F6E\u63D0\u9192"),1)]),_:1})]),default:(0,h.w5)(()=>[(0,h._)("div",tv,[(0,h._)("div",tw,[(0,h.Wm)((0,h.SU)(td.Z),{depth:"3",style:{"font-size":"12px","margin-bottom":"8px"}},{default:(0,h.w5)(()=>[(0,h.Uk)("\u5FEB\u901F\u63D0\u9192")]),_:1}),(0,h._)("div",tg,[(0,h.Wm)((0,h.SU)(e9.ZP),{type:"error",size:"small",class:"quick-reminder-tag",onClick:t[1]||(t[1]=e=>o("hour"))},{default:(0,h.w5)(()=>[(0,h.Uk)(" 1\u5C0F\u65F6 ")]),_:1}),(0,h.Wm)((0,h.SU)(e9.ZP),{type:"warning",size:"small",class:"quick-reminder-tag",onClick:t[2]||(t[2]=e=>o("2hour"))},{default:(0,h.w5)(()=>[(0,h.Uk)(" 2\u5C0F\u65F6 ")]),_:1}),(0,h.Wm)((0,h.SU)(e9.ZP),{type:"info",size:"small",class:"quick-reminder-tag",onClick:t[3]||(t[3]=e=>o("day"))},{default:(0,h.w5)(()=>[(0,h.Uk)(" \u5F53\u5929 ")]),_:1})])]),(0,h._)("div",th,[(0,h.Wm)((0,h.SU)(td.Z),{depth:"3",style:{"font-size":"12px",margin:"12px 0 8px 0"}},{default:(0,h.w5)(()=>[(0,h.Uk)("\u81EA\u5B9A\u4E49\u65F6\u95F4")]),_:1}),(0,h.Wm)((0,h.SU)(tm.Z),{value:r.value,"onUpdate:value":t[4]||(t[4]=e=>r.value=e),type:"datetime",size:"small",style:{width:"100%"},placeholder:"\u9009\u62E9\u63D0\u9192\u65F6\u95F4"},null,8,["value"])]),(0,h.Wm)((0,h.SU)(eB.Z),{style:{"margin-top":"12px"},justify:"end"},{default:(0,h.w5)(()=>[e.reminderEnabled?((0,h.wg)(),(0,h.j4)((0,h.SU)(S.ZP),{key:0,size:"small",onClick:i},{default:(0,h.w5)(()=>[(0,h.Uk)(" \u53D6\u6D88\u63D0\u9192 ")]),_:1})):(0,h.kq)("",!0),(0,h.Wm)((0,h.SU)(S.ZP),{size:"small",type:"primary",onClick:n,disabled:!r.value},{default:(0,h.w5)(()=>[(0,h.Uk)(" \u786E\u5B9A ")]),_:1},8,["disabled"])]),_:1})])]),_:1},8,["show"]))}}),tp=(0,Q.default)(tf,[["__scopeId","data-v-24437b48"]]),ty=new class e{async init(){return new Promise((e,t)=>{let a=indexedDB.open(this.dbName,this.dbVersion);a.onerror=()=>{console.error("\u6253\u5F00\u65E5\u5FD7\u6570\u636E\u5E93\u5931\u8D25:",a.error),t(a.error)},a.onsuccess=()=>{this.db=a.result,e()},a.onupgradeneeded=e=>{let t=e.target.result;if(!t.objectStoreNames.contains(this.storeName)){let e=t.createObjectStore(this.storeName,{keyPath:"id",autoIncrement:!0});e.createIndex("timestamp","timestamp",{unique:!1}),e.createIndex("level","level",{unique:!1}),e.createIndex("source","source",{unique:!1})}}})}async ensureDB(){!this.db&&await this.init()}async log(e,t,a,r){try{await this.ensureDB();let l={level:e,message:t,timestamp:Date.now(),data:a,source:r},o=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName);await new Promise((e,t)=>{let a=o.add(l);a.onsuccess=()=>e(),a.onerror=()=>t(a.error)}),await this.cleanupOldLogs()}catch(e){console.error("\u5199\u5165\u65E5\u5FD7\u5931\u8D25:",e)}}async getLogs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{await this.ensureDB();let t=this.db.transaction([this.storeName],"readonly").objectStore(this.storeName).index("timestamp"),a=[],r=e.limit||100,l=0,o=e.offset||0;return new Promise((n,i)=>{let s=t.openCursor(null,"prev");s.onsuccess=t=>{let i=t.target.result;if(!i){n(a);return}let s=i.value;if(o>0){o--,i.continue();return}if(l>=r){n(a);return}if(e.level&&s.level!==e.level||e.source&&s.source!==e.source||e.startTime&&s.timestamp<e.startTime||e.endTime&&s.timestamp>e.endTime){i.continue();return}a.push(s),l++,i.continue()},s.onerror=()=>i(s.error)})}catch(e){return console.error("\u83B7\u53D6\u65E5\u5FD7\u5931\u8D25:",e),[]}}async getLogsByLevel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;try{await this.ensureDB();let a=this.db.transaction([this.storeName],"readonly").objectStore(this.storeName).index("level");return new Promise((r,l)=>{let o=a.getAll(e,t);o.onsuccess=()=>r(o.result),o.onerror=()=>l(o.error)})}catch(e){return console.error("\u6309\u7EA7\u522B\u83B7\u53D6\u65E5\u5FD7\u5931\u8D25:",e),[]}}async getLogsBySource(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;try{await this.ensureDB();let a=this.db.transaction([this.storeName],"readonly").objectStore(this.storeName).index("source");return new Promise((r,l)=>{let o=a.getAll(e,t);o.onsuccess=()=>r(o.result),o.onerror=()=>l(o.error)})}catch(e){return console.error("\u6309\u6765\u6E90\u83B7\u53D6\u65E5\u5FD7\u5931\u8D25:",e),[]}}async getLogsByTimeRange(e,t){try{await this.ensureDB();let a=this.db.transaction([this.storeName],"readonly").objectStore(this.storeName).index("timestamp");return new Promise((r,l)=>{let o=a.getAll(IDBKeyRange.bound(e,t));o.onsuccess=()=>r(o.result),o.onerror=()=>l(o.error)})}catch(e){return console.error("\u6309\u65F6\u95F4\u8303\u56F4\u83B7\u53D6\u65E5\u5FD7\u5931\u8D25:",e),[]}}async getLogCount(){try{await this.ensureDB();let e=this.db.transaction([this.storeName],"readonly").objectStore(this.storeName);return new Promise((t,a)=>{let r=e.count();r.onsuccess=()=>t(r.result),r.onerror=()=>a(r.error)})}catch(e){return console.error("\u83B7\u53D6\u65E5\u5FD7\u6570\u91CF\u5931\u8D25:",e),0}}async clearLogs(){try{await this.ensureDB();let e=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName);await new Promise((t,a)=>{let r=e.clear();r.onsuccess=()=>t(),r.onerror=()=>a(r.error)})}catch(e){console.error("\u6E05\u7A7A\u65E5\u5FD7\u5931\u8D25:",e)}}async deleteLogsByTimeRange(e,t){try{await this.ensureDB();let a=await this.getLogsByTimeRange(e,t),r=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName);for(let e of a)e.id&&await new Promise((t,a)=>{let l=r.delete(e.id);l.onsuccess=()=>t(),l.onerror=()=>a(l.error)})}catch(e){console.error("\u5220\u9664\u65F6\u95F4\u8303\u56F4\u65E5\u5FD7\u5931\u8D25:",e)}}async cleanupOldLogs(){try{let e=await this.getLogCount();if(e>this.maxLogs){let t=await this.getLogs({limit:e-this.maxLogs}),a=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName);for(let e of t)e.id&&await new Promise((t,r)=>{let l=a.delete(e.id);l.onsuccess=()=>t(),l.onerror=()=>r(l.error)})}}catch(e){console.error("\u6E05\u7406\u65E7\u65E5\u5FD7\u5931\u8D25:",e)}}async exportLogs(){try{let e=await this.getLogs({limit:1e3});return JSON.stringify(e,null,2)}catch(e){return console.error("\u5BFC\u51FA\u65E5\u5FD7\u5931\u8D25:",e),"[]"}}async importLogs(e){try{for(let t of JSON.parse(e))await this.log(t.level,t.message,t.data,t.source)}catch(e){console.error("\u5BFC\u5165\u65E5\u5FD7\u5931\u8D25:",e)}}info(e,t,a){return this.log("info",e,t,a)}warn(e,t,a){return this.log("warn",e,t,a)}error(e,t,a){return this.log("error",e,t,a)}debug(e,t,a){return this.log("debug",e,t,a)}constructor(){(0,ed._)(this,"dbName","NewTabLogger"),(0,ed._)(this,"dbVersion",1),(0,ed._)(this,"storeName","logs"),(0,ed._)(this,"db",null),(0,ed._)(this,"maxLogs",1e3)}},tb={class:"task-card-wrapper"},tS={key:0,class:"quick-tags"},t_={class:"quick-tags-buttons"},tk={class:"task-header"},tU={class:"task-title-area"},tx=["contenteditable"],tC={class:"action-buttons"},tT={class:"task-content"},tD=["contenteditable"],tL=(0,h.aZ)({__name:"TaskCard",props:{data:{},saveTask:{type:Function},completeTask:{type:Function},deleteTask:{type:Function},resetReminder:{type:Function}},setup(e){let t=(0,h.iH)(!1),a=(0,h.iH)(),r=(0,h.iH)(),l=(0,h.iH)(),o=(0,h.iH)({}),n=(0,h.Fl)(()=>!e.data.updateTime),i=(0,h.Fl)(()=>n.value&&t.value),s=(0,h.iH)("hour"),u=(0,h.Fl)(()=>{if(t.value&&s.value)return s.value;let a=t.value?o.value:e.data;if(a.reminderEnabled&&a.reminderTime){let e=Date.now(),t=a.reminderTime-e;if("day"===a.reminderType)return"day";if("hour"===a.reminderType){if(t<=36e5)return"hour";if(t<=72e5)return"2hour"}}return null}),c=(0,h.iH)(!1),d=async a=>{t.value?(o.value.reminderTime=a.reminderTime,o.value.reminderEnabled=a.reminderEnabled,o.value.reminderType=a.reminderType,o.value.reminderShown=!1,o.value.reminderShownTime=void 0):(e.saveTask({...e.data,reminderTime:a.reminderTime,reminderEnabled:a.reminderEnabled,reminderType:a.reminderType,reminderShown:!1,reminderShownTime:void 0}),await ty.info("\u7528\u6237\u66F4\u65B0\u4EFB\u52A1\u63D0\u9192",{taskId:e.data.id,title:e.data.title,oldReminderTime:e.data.reminderTime,newReminderTime:a.reminderTime,reminderType:a.reminderType},"TaskCard"))},m=async()=>{t.value?(o.value.reminderEnabled=!1,o.value.reminderTime=void 0,o.value.reminderShown=!1,o.value.reminderShownTime=void 0):(e.saveTask({...e.data,reminderEnabled:!1,reminderTime:void 0,reminderShown:!1,reminderShownTime:void 0}),await ty.info("\u7528\u6237\u53D6\u6D88\u4EFB\u52A1\u63D0\u9192",{taskId:e.data.id,title:e.data.title},"TaskCard"))},v=e=>{let t,a;let r=Date.now();switch(e){case"hour":t=r+36e5,a="hour";break;case"2hour":t=r+72e5,a="hour";break;case"day":let l=new Date;l.setHours(23,59,59,999),t=l.getTime(),a="day"}o.value.reminderTime=t,o.value.reminderEnabled=!0,o.value.reminderType=a,o.value.reminderShown=!1,o.value.reminderShownTime=void 0,s.value=e,console.log("\u8BBE\u7F6E\u5FEB\u901F\u63D0\u9192:",e,"\u65F6\u95F4:",new Date(t).toLocaleString())},w=r=>{t.value=r,r?(l.value={...e.data},o.value={...e.data},!e.data.updateTime&&!e.data.reminderTime&&(s.value=null),(0,h.Y3)(()=>{a.value&&(a.value.focus(),!e.data.title&&g(a.value))})):c.value=!1},g=e=>{let t=document.createRange();t.selectNodeContents(e);let a=window.getSelection();null==a||a.removeAllRanges(),null==a||a.addRange(t)},f=()=>{t.value&&!e.data.description&&r.value&&(0,h.Y3)(()=>{g(r.value)})};(0,h.bv)(()=>{if(e.data.updateTime){if(e.data.reminderEnabled&&e.data.reminderTime){let t=Date.now(),a=e.data.reminderTime-t;"day"===e.data.reminderType?s.value="day":"hour"===e.data.reminderType&&(a<=36e5?s.value="hour":a<=72e5&&(s.value="2hour"))}}else w(!0),(0,h.Y3)(()=>{!e.data.title&&!e.data.description&&v("hour")})});let p=()=>{t.value&&!e.data.title&&a.value&&(0,h.Y3)(()=>{g(a.value)})},y=async()=>{var t,l,n,i;let u=(null===(l=a.value)||void 0===l?void 0:null===(t=l.textContent)||void 0===t?void 0:t.trim())||"",c=(null===(i=r.value)||void 0===i?void 0:null===(n=i.textContent)||void 0===n?void 0:n.trim())||"",d={...o.value,title:u,description:c,updateTime:Date.now(),reminderShown:!1,reminderShownTime:void 0};if(e.saveTask(d),w(!1),await ty.info("\u7528\u6237\u4FDD\u5B58\u4EFB\u52A1",{taskId:d.id,title:d.title,hasReminder:d.reminderEnabled,reminderTime:d.reminderTime},"TaskCard"),o.value.reminderEnabled&&o.value.reminderTime){let e=Date.now(),t=o.value.reminderTime-e;"day"===o.value.reminderType?s.value="day":"hour"===o.value.reminderType&&(t<=36e5?s.value="hour":t<=72e5&&(s.value="2hour"))}else s.value=null},b=()=>{l.value&&(o.value={...l.value},a.value&&(a.value.textContent=l.value.title||""),r.value&&(r.value.textContent=l.value.description||"")),w(!1),s.value=null},_=()=>{e.completeTask(e.data.id||0)},k=()=>{e.deleteTask(e.data.id||0)},U=async()=>{e.resetReminder&&(e.resetReminder(e.data.id||0),await ty.info("\u7528\u6237\u91CD\u7F6E\u4EFB\u52A1\u63D0\u9192",{taskId:e.data.id,title:e.data.title},"TaskCard"))},x=e=>{"Enter"===e.key&&e.ctrlKey?(e.preventDefault(),y()):"Escape"===e.key&&(e.preventDefault(),b())},C=e=>{var t;e.preventDefault();let a=(null===(t=e.clipboardData)||void 0===t?void 0:t.getData("text/plain"))||"";document.execCommand("insertText",!1,a)};return(e,l)=>((0,h.wg)(),(0,h.iD)("div",tb,[(0,h.Wm)((0,h.SU)(eO.ZP),{class:(0,h.C_)(["task-card",{"edit-mode":t.value,"selected-hour":"hour"===u.value,"selected-2hour":"2hour"===u.value,"selected-day":"day"===u.value}])},{default:(0,h.w5)(()=>[i.value?((0,h.wg)(),(0,h.iD)("div",tS,[(0,h._)("div",t_,[(0,h.Uk)(" \u5FEB\u901F\u63D0\u9192 "),(0,h.Wm)((0,h.SU)(e9.ZP),{type:"error",size:"small",class:(0,h.C_)(["quick-tag",{selected:"hour"===s.value}]),onClick:l[0]||(l[0]=e=>v("hour"))},{icon:(0,h.w5)(()=>[(0,h.Wm)((0,h.SU)(ec.g),{size:"12"},{default:(0,h.w5)(()=>[(0,h.Wm)((0,h.SU)(e1.Z))]),_:1})]),default:(0,h.w5)(()=>[(0,h.Uk)(" 1\u5C0F\u65F6 ")]),_:1},8,["class"]),(0,h.Wm)((0,h.SU)(e9.ZP),{type:"warning",size:"small",class:(0,h.C_)(["quick-tag",{selected:"2hour"===s.value}]),onClick:l[1]||(l[1]=e=>v("2hour"))},{icon:(0,h.w5)(()=>[(0,h.Wm)((0,h.SU)(ec.g),{size:"12"},{default:(0,h.w5)(()=>[(0,h.Wm)((0,h.SU)(e1.Z))]),_:1})]),default:(0,h.w5)(()=>[(0,h.Uk)(" 2\u5C0F\u65F6 ")]),_:1},8,["class"]),(0,h.Wm)((0,h.SU)(e9.ZP),{size:"small",class:(0,h.C_)(["quick-tag",{selected:"day"===s.value}]),onClick:l[2]||(l[2]=e=>v("day"))},{icon:(0,h.w5)(()=>[(0,h.Wm)((0,h.SU)(ec.g),{size:"12"},{default:(0,h.w5)(()=>[(0,h.Wm)((0,h.SU)(e2.Z))]),_:1})]),default:(0,h.w5)(()=>[(0,h.Uk)(" \u5F53\u5929 ")]),_:1},8,["class"])])])):(0,h.kq)("",!0),(0,h.Wm)(tc,{"reminder-enabled":(t.value?o.value:e.data).reminderEnabled,"reminder-time":(t.value?o.value:e.data).reminderTime,"reminder-shown":(t.value?o.value:e.data).reminderShown,"reminder-shown-time":(t.value?o.value:e.data).reminderShownTime},null,8,["reminder-enabled","reminder-time","reminder-shown","reminder-shown-time"]),(0,h._)("div",tk,[(0,h._)("div",tU,[(0,h._)("h3",{ref_key:"titleRef",ref:a,class:(0,h.C_)(["task-title",{"empty-title":!e.data.title}]),contenteditable:t.value,onKeydown:x,onPaste:C,onBlur:l[3]||(l[3]=r=>{var l,o;return t.value&&(null===(o=a.value)||void 0===o?void 0:null===(l=o.textContent)||void 0===l?void 0:l.trim())===""&&(a.value.textContent=e.data.title||"")}),onFocus:p},(0,h.zw)(e.data.title||"\u672A\u547D\u540D\u4EFB\u52A1"),43,tx)]),(0,h._)("div",tC,[t.value?((0,h.wg)(),(0,h.iD)(h.HY,{key:1},[(0,h.Wm)((0,h.SU)(eE.Z),{trigger:"hover",placement:"top"},{trigger:(0,h.w5)(()=>[(0,h.Wm)((0,h.SU)(S.ZP),{size:"small",circle:"",class:"action-btn save-btn",onClick:y},{default:(0,h.w5)(()=>[(0,h.Wm)((0,h.SU)(ec.g),{size:"14"},{default:(0,h.w5)(()=>[(0,h.Wm)((0,h.SU)(e3.Z))]),_:1})]),_:1})]),default:(0,h.w5)(()=>[(0,h.Uk)(" \u4FDD\u5B58 (Ctrl+Enter) ")]),_:1}),(0,h.Wm)((0,h.SU)(eE.Z),{trigger:"hover",placement:"top"},{trigger:(0,h.w5)(()=>[(0,h.Wm)((0,h.SU)(S.ZP),{size:"small",circle:"",class:"action-btn cancel-btn",onClick:b},{default:(0,h.w5)(()=>[(0,h.Wm)((0,h.SU)(ec.g),{size:"14"},{default:(0,h.w5)(()=>[(0,h.Wm)((0,h.SU)(e6.Z))]),_:1})]),_:1})]),default:(0,h.w5)(()=>[(0,h.Uk)(" \u53D6\u6D88 (Esc) ")]),_:1})],64)):((0,h.wg)(),(0,h.iD)(h.HY,{key:0},[(0,h.Wm)(tp,{modelValue:c.value,"onUpdate:modelValue":l[4]||(l[4]=e=>c.value=e),"reminder-enabled":e.data.reminderEnabled,"reminder-time":e.data.reminderTime,"reminder-type":e.data.reminderType,"onUpdate:reminder":d,onCancel:m},null,8,["modelValue","reminder-enabled","reminder-time","reminder-type"]),(0,h.Wm)((0,h.SU)(eE.Z),{trigger:"hover",placement:"top"},{trigger:(0,h.w5)(()=>[(0,h.Wm)((0,h.SU)(S.ZP),{size:"small",circle:"",class:"action-btn edit-btn",onClick:l[5]||(l[5]=e=>w(!0))},{default:(0,h.w5)(()=>[(0,h.Wm)((0,h.SU)(ec.g),{size:"14"},{default:(0,h.w5)(()=>[(0,h.Wm)((0,h.SU)(e4.Z))]),_:1})]),_:1})]),default:(0,h.w5)(()=>[(0,h.Uk)(" \u7F16\u8F91 ")]),_:1}),(0,h.Wm)((0,h.SU)(eE.Z),{trigger:"hover",placement:"top"},{trigger:(0,h.w5)(()=>[(0,h.Wm)((0,h.SU)(S.ZP),{size:"small",circle:"",class:"action-btn complete-btn",onClick:l[6]||(l[6]=e=>_())},{default:(0,h.w5)(()=>[(0,h.Wm)((0,h.SU)(ec.g),{size:"14"},{default:(0,h.w5)(()=>[(0,h.Wm)((0,h.SU)(e8.Z))]),_:1})]),_:1})]),default:(0,h.w5)(()=>[(0,h.Uk)(" \u5B8C\u6210 ")]),_:1}),(0,h.Wm)((0,h.SU)(eE.Z),{trigger:"hover",placement:"top"},{trigger:(0,h.w5)(()=>[(0,h.Wm)((0,h.SU)(S.ZP),{size:"small",circle:"",class:"action-btn delete-btn",onClick:l[7]||(l[7]=e=>k())},{default:(0,h.w5)(()=>[(0,h.Wm)((0,h.SU)(ec.g),{size:"14"},{default:(0,h.w5)(()=>[(0,h.Wm)((0,h.SU)(e5.Z))]),_:1})]),_:1})]),default:(0,h.w5)(()=>[(0,h.Uk)(" \u5220\u9664 ")]),_:1}),e.data.reminderShown?((0,h.wg)(),(0,h.j4)((0,h.SU)(eE.Z),{key:0,trigger:"hover",placement:"top"},{trigger:(0,h.w5)(()=>[(0,h.Wm)((0,h.SU)(S.ZP),{size:"small",circle:"",class:"action-btn reset-btn",onClick:l[8]||(l[8]=e=>U())},{default:(0,h.w5)(()=>[(0,h.Wm)((0,h.SU)(ec.g),{size:"14"},{default:(0,h.w5)(()=>[(0,h.Wm)((0,h.SU)(e1.Z))]),_:1})]),_:1})]),default:(0,h.w5)(()=>[(0,h.Uk)(" \u91CD\u7F6E\u63D0\u9192 ")]),_:1})):(0,h.kq)("",!0)],64))])]),(0,h._)("div",tT,[(0,h._)("p",{ref_key:"descriptionRef",ref:r,class:(0,h.C_)(["task-description",{"empty-description":!e.data.description}]),contenteditable:t.value,onKeydown:x,onPaste:C,onBlur:l[9]||(l[9]=a=>{var l,o;return t.value&&(null===(o=r.value)||void 0===o?void 0:null===(l=o.textContent)||void 0===l?void 0:l.trim())===""&&(r.value.textContent=e.data.description||"")}),onFocus:f},(0,h.zw)(e.data.description||"\u70B9\u51FB\u7F16\u8F91\u6309\u94AE\u6DFB\u52A0\u63CF\u8FF0..."),43,tD)])]),_:1},8,["class"])]))}});var tW=a("8622");let tZ={class:"task-container"},tI={key:0,class:"error-container"},tz={class:"error-message"},tH=(0,h._)("h3",null,"\u52A0\u8F7D\u5931\u8D25",-1),tM={key:1},tA={class:"task-header"},tN=(0,h._)("h2",{class:"task-title"},"\uD83D\uDCDD \u6211\u7684\u4EFB\u52A1",-1),tP={class:"task-count"},tj={class:"task-list"},tB={class:"add-task-wrapper"},tE=(0,h.aZ)({__name:"TaskList",setup(e){let t=(0,h.iH)(!1),a=(0,h.iH)("");(0,h.d1)(e=>(console.error("TaskList\u7EC4\u4EF6\u9519\u8BEF:",e),t.value=!0,a.value=e.message||"\u672A\u77E5\u9519\u8BEF",!1));let{unCompletedTaskCount:r,unCompletedTaskList:l,handleSaveTask:o,handleCompleteTask:n,handleAddTask:i,handleDeleteTask:s,resetTaskReminder:u,initializeTaskList:c}=(0,tW.useTaskManager)();return(0,h.bv)(()=>{try{c()}catch(e){console.error("\u521D\u59CB\u5316\u4EFB\u52A1\u5217\u8868\u5931\u8D25:",e),t.value=!0,a.value="\u521D\u59CB\u5316\u5931\u8D25"}}),(e,d)=>((0,h.wg)(),(0,h.iD)("div",tZ,[t.value?((0,h.wg)(),(0,h.iD)("div",tI,[(0,h._)("div",tz,[tH,(0,h._)("p",null,(0,h.zw)(a.value),1),(0,h.Wm)((0,h.SU)(S.ZP),{onClick:d[0]||(d[0]=()=>{t.value=!1,(0,h.SU)(c)()})},{default:(0,h.w5)(()=>[(0,h.Uk)(" \u91CD\u8BD5 ")]),_:1})])])):((0,h.wg)(),(0,h.iD)("div",tM,[(0,h._)("div",tA,[tN,(0,h._)("span",tP,(0,h.zw)((0,h.SU)(r))+" \u4E2A\u5F85\u5B8C\u6210",1)]),(0,h._)("div",tj,[(0,h.Wm)(h.W3,{name:"task",tag:"div",class:"task-grid"},{default:(0,h.w5)(()=>[((0,h.wg)(!0),(0,h.iD)(h.HY,null,(0,h.Ko)((0,h.SU)(l),e=>((0,h.wg)(),(0,h.j4)(tL,{key:e.id,data:e,saveTask:(0,h.SU)(o),completeTask:(0,h.SU)(n),deleteTask:(0,h.SU)(s),resetReminder:(0,h.SU)(u)},null,8,["data","saveTask","completeTask","deleteTask","resetReminder"]))),128))]),_:1}),(0,h._)("div",tB,[(0,h.Wm)((0,h.SU)(S.ZP),{class:"add-new-card",dashed:"",onClick:(0,h.SU)(i)},{icon:(0,h.w5)(()=>[(0,h.Wm)((0,h.SU)(ec.g),{size:"20"},{default:(0,h.w5)(()=>[(0,h.Wm)((0,h.SU)(e0.Z))]),_:1})]),default:(0,h.w5)(()=>[(0,h.Uk)(" \u6DFB\u52A0\u65B0\u4EFB\u52A1 ")]),_:1},8,["onClick"])])])]))]))}});var tF=a("8035"),tR=a.n(tF);let tV={class:"font-size-24 m-0"},tO=["innerHTML"],tq=(0,h.aZ)({__name:"Time",setup(e){let[t,a]=(0,_.Rr)("new-tab.audio.skip-times",{defaultValue:0});v().locale(tR());let r=(0,h.iH)(""),l=(0,h.iH)(""),o=null;function n(){let e=v()();r.value=e.format("HH:mm"),l.value=`\u{4ECA}\u{5929}\u{662F} <strong>${e.year()}</strong> \u{5E74} <strong>${e.month()+1}</strong> \u{6708} <strong>${e.date()}</strong> \u{65E5} <strong>${e.format("dddd")}</strong>`}return(0,h.wF)(()=>{n(),o=setInterval(n,1e3)}),(0,h.bv)(async()=>{if(t.value>0){a(t.value-1);return}a(10);let{data:e}=await ef.Z.get("https://api.kuleu.com/api/getGreetingMessage");eb(e)}),(0,h.SK)(()=>{clearInterval(o)}),(e,t)=>((0,h.wg)(),(0,h.iD)(h.HY,null,[(0,h._)("h1",tV,(0,h.zw)(r.value),1),(0,h._)("p",{innerHTML:l.value,class:"font-size-6"},null,8,tO)],64))}}),t$={copy:[{selector:"document",texts:["\u4F60\u90FD\u590D\u5236\u4E86\u4E9B\u4EC0\u4E48\u5440\uFF0C\u8F6C\u8F7D\u8981\u8BB0\u5F97\u52A0\u4E0A\u51FA\u5904\u54E6\uFF01"]}],visibilitychange:[{selector:"document",texts:["\u54C7\uFF0C\u4F60\u7EC8\u4E8E\u56DE\u6765\u4E86\uFF5E"]}],mouseover:[{selector:".vue-live2d-tool .custom-fa-comment",texts:["\u731C\u731C\u6211\u8981\u8BF4\u4E9B\u4EC0\u4E48\uFF1F","\u6B23\u8D4F\u4E00\u4E9B\u6709\u610F\u601D\u7684\u77ED\u53E5\uFF1F"]},{selector:".vue-live2d-tool .custom-fa-user-circle",texts:["\u60F3\u770B\u770B\u6211\u7684\u670B\u53CB\u4EEC\u5417\uFF1F"]},{selector:".vue-live2d-tool .custom-fa-street-view",texts:["\u53D8\u88C5\uFF01"]},{selector:".vue-live2d-tool .custom-fa-camera-retro",texts:["\u4E00\u8D77\u62CD\u7167\u7559\u5FF5\uFF1F"]},{selector:".vue-live2d-tool .custom-fa-info-circle",texts:["(\uFF3E\uFF35\uFF3E)\u30CE~\uFF39\uFF2F"]},{selector:".vue-live2d-tool .custom-fa-times",texts:["\u5C31\u8981\u8BF4\u518D\u89C1\u4E86\u5417\uFF1F"]}]},tY=["innerHTML"],tJ=["id","width","height"],tK={class:"vue3-live2d-tool"},tG=["innerHTML","onClick"],tQ=[(0,h._)("span",null,"\u770B\u677F\u5A18",-1)],tX=(0,h.aZ)({__name:"index",props:(0,h.Vf)({isLeft:{default:!1,type:Boolean},isTipBottom:{default:!1,type:Boolean},customId:{default:"vue3-live2d-main",type:String},apiPath:{default:"/vue3-live2d-static-api/indexes",type:String},model:{default:()=>["Potion-Maker/Pio","school-2017-costume-yellow"],type:Array},setModel:{default:()=>{},type:Function},homePage:{default:"https://github.com/double2kill/new-tab-extension",type:String},tips:{default:()=>t$,type:Object},mainShow:{default:!0,type:Boolean},setMainShow:{default:()=>{},type:Function}},{width:{default:400},widthModifiers:{},height:{default:400},heightModifiers:{},resolution:{default:1},resolutionModifiers:{}}),emits:["update:width","update:height","update:resolution"],setup(e){let t=(0,h.tT)(e,"width"),a=(0,h.tT)(e,"height"),r=(0,h.tT)(e,"resolution"),{apiPath:l,customId:o,isLeft:n,homePage:i,model:s,isTipBottom:u,tips:c,setModel:d}=e,m=null,v=(0,h.iH)({tip:!1,main:!0,tool:!1,toggle:!1}),w="\u770B\u677F\u5A18",g="",f="",p=[{className:"custom-fa-comment",svg:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" height="20px" width="20px">\x3c!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --\x3e<path d="M256 32C114.6 32 0 125.1 0 240c0 49.6 21.4 95 57 130.7C44.5 421.1 2.7 466 2.2 466.5c-2.2 2.3-2.8 5.7-1.5 8.7S4.8 480 8 480c66.3 0 116-31.8 140.6-51.4 32.7 12.3 69 19.4 107.4 19.4 141.4 0 256-93.1 256-208S397.4 32 256 32z"/></svg>',click:function(){C({url:"https://v1.hitokoto.cn",success:e=>{let{hitokoto:t,id:a,creator:r,from:l}=e;S(`${t} <br> - by <a href="https://hitokoto.cn?id=${a}">${r}</a> from \u{300A}${l} \u{300B}`)}})}},{className:"custom-fa-user-circle",svg:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512" height="20px" width="20px">\x3c!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --\x3e<path d="M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 96c48.6 0 88 39.4 88 88s-39.4 88-88 88-88-39.4-88-88 39.4-88 88-88zm0 344c-58.7 0-111.3-26.6-146.5-68.2 18.8-35.4 55.6-59.8 98.5-59.8 2.4 0 4.8.4 7.1 1.1 13 4.2 26.6 6.9 40.9 6.9 14.3 0 28-2.7 40.9-6.9 2.3-.7 4.7-1.1 7.1-1.1 42.9 0 79.7 24.4 98.5 59.8C359.3 421.4 306.7 448 248 448z"/></svg>',click:function(){C({url:`${l}/models.json`,success:e=>{let t=e.filter(e=>{let{modelPath:t}=e;return g!==t}),{modelPath:a,modelIntroduce:r}=t[Math.floor(Math.random()*t.length)];g!==a&&(d([g,f]),g=a),S(`${r}`,4e3),b(!0)}})}},{className:"custom-fa-street-view",svg:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" height="20px" width="20px">\x3c!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --\x3e<path d="M367.9 329.76c-4.62 5.3-9.78 10.1-15.9 13.65v22.94c66.52 9.34 112 28.05 112 49.65 0 30.93-93.12 56-208 56S48 446.93 48 416c0-21.6 45.48-40.3 112-49.65v-22.94c-6.12-3.55-11.28-8.35-15.9-13.65C58.87 345.34 0 378.05 0 416c0 53.02 114.62 96 256 96s256-42.98 256-96c0-37.95-58.87-70.66-144.1-86.24zM256 128c35.35 0 64-28.65 64-64S291.35 0 256 0s-64 28.65-64 64 28.65 64 64 64zm-64 192v96c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-96c17.67 0 32-14.33 32-32v-96c0-26.51-21.49-48-48-48h-11.8c-11.07 5.03-23.26 8-36.2 8s-25.13-2.97-36.2-8H208c-26.51 0-48 21.49-48 48v96c0 17.67 14.33 32 32 32z"/></svg>',click:b},{className:"custom-fa-camera-retro",svg:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" height="20px" width="20px">\x3c!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --\x3e<path d="M48 32C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48H48zm0 32h106c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H38c-3.3 0-6-2.7-6-6V80c0-8.8 7.2-16 16-16zm426 96H38c-3.3 0-6-2.7-6-6v-36c0-3.3 2.7-6 6-6h138l30.2-45.3c1.1-1.7 3-2.7 5-2.7H464c8.8 0 16 7.2 16 16v74c0 3.3-2.7 6-6 6zM256 424c-66.2 0-120-53.8-120-120s53.8-120 120-120 120 53.8 120 120-53.8 120-120 120zm0-208c-48.5 0-88 39.5-88 88s39.5 88 88 88 88-39.5 88-88-39.5-88-88-88zm-48 104c-8.8 0-16-7.2-16-16 0-35.3 28.7-64 64-64 8.8 0 16 7.2 16 16s-7.2 16-16 16c-17.6 0-32 14.4-32 32 0 8.8-7.2 16-16 16z"/></svg>',click:function(){S("\u7167\u597D\u4E86\u561B\uFF0C\u7559\u4E2A\u7EAA\u5FF5\u5416~"),window.Live2D.captureName="photo.png",window.Live2D.captureFrame=!0}},{className:"custom-fa-info-circle",svg:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" height="20px" width="20px">\x3c!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --\x3e<path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"/></svg>',click:function(){open(i)}},{className:"custom-fa-times",svg:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="-40 -40 432 592" fill="currentColor" height="20px" width="20px">\x3c!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --\x3e<path d="M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"/></svg>',click:function(){v.value.main=!1,e.setMainShow(!1)}}];function y(){window.loadlive2d&&l&&g&&f&&(window.loadlive2d(o,`${l}/${g}/${f}.json`),console.log(`Live2D \u{6A21}\u{578B} ${g}\u{FF0C}\u{670D}\u{88C5} ${f} \u{52A0}\u{8F7D}\u{5B8C}\u{6210}`))}function b(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];C({url:`${l}/${g}/textures.json`,success:t=>{let a=t.filter(e=>f!==e),r=a[Math.floor(Math.random()*a.length)];f!==r&&(d([g,r]),f=r),y(),!e&&S("\u6211\u7684\u65B0\u8863\u670D\u597D\u770B\u561B\uFF1F",4e3)}})}function S(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6e3;m?(clearTimeout(m),m=null):v.value.tip=!0,w=e,m=setTimeout(()=>{v.value.tip=!1,m=null},t)}function _(){v.value.main=!0,e.setMainShow(!0)}function k(){v.value.tool=!1}function U(){v.value.tool=!0}function x(){for(let e in c)for(let{selector:t,texts:a}of c[e]){let r="document"===t?document:document.querySelector(t);if(null!=r)r.addEventListener(e,()=>{S(a[Math.floor(Math.random()*a.length)],2e3)})}}async function C(e){let{url:t,success:a}=e,{data:r}=await ef.Z.get(t);a&&a(r)}let T=(0,h.Fl)(()=>t.value*r.value),D=(0,h.Fl)(()=>a.value*r.value),L=(0,h.Fl)(()=>e.mainShow&&v.value.tip),W=(0,h.Fl)(()=>e.mainShow&&v.value.tool),Z=(0,h.Fl)(()=>!e.mainShow);(0,h.bv)(async()=>{[g,f]=s,y(),(0,h.Y3)(x)});let I=(0,h.iH)(!0);function z(){I.value=!1,(0,h.Y3)(()=>{I.value=!0,(0,h.Y3)(()=>{y()})})}return(0,h.YP)(T,z),(0,h.YP)(D,z),(r,l)=>((0,h.wg)(),(0,h.iD)("div",{class:(0,h.C_)(["vue3-live2d",[(0,h.SU)(n)?"vue3-live2d-on-left":"vue3-live2d-on-right"]]),style:(0,h.j5)({width:`${t.value}px`,height:`${a.value}px`}),onMouseover:U,onMouseout:k},[(0,h.wy)((0,h._)("div",{innerHTML:(0,h.SU)(w),class:(0,h.C_)(["vue3-live2d-tip",[(0,h.SU)(u)?"vue3-live2d-tip-on-bottom":"vue3-live2d-tip-on-top"]])},null,10,tY),[[h.F8,(0,h.SU)(L)]]),(0,h.SU)(I)?(0,h.wy)(((0,h.wg)(),(0,h.iD)("canvas",{key:0,id:(0,h.SU)(o),class:(0,h.C_)(["'vue3-live2d-main'",[(0,h.SU)(n)?"vue3-live2d-main-on-left":"vue3-live2d-main-on-right"]]),style:(0,h.j5)({width:`${t.value}px`,height:`${a.value}px`}),width:(0,h.SU)(T),height:(0,h.SU)(D)},null,14,tJ)),[[h.F8,e.mainShow]]):(0,h.kq)("",!0),(0,h.wy)((0,h._)("div",tK,[((0,h.wg)(!0),(0,h.iD)(h.HY,null,(0,h.Ko)((0,h.SU)(p),(e,t)=>((0,h.wg)(),(0,h.iD)("span",{key:t,class:(0,h.C_)(e.className),innerHTML:e.svg,onClick:e.click},null,10,tG))),128))],512),[[h.F8,(0,h.SU)(W)]]),(0,h.wy)((0,h._)("div",{onClick:_,class:(0,h.C_)(["vue3-live2d-toggle",[(0,h.SU)(n)?"vue3-live2d-toggle-on-left":"vue3-live2d-toggle-on-right"]])},tQ,2),[[h.F8,(0,h.SU)(Z)]])],38))}}),t0=null,t1=(0,h.iH)(!1),t2=!1,t4=async()=>{try{let e=t8(),t=Date.now(),a=!1;e.forEach(async e=>{if(e.reminderEnabled&&e.reminderTime&&!e.completedTime&&!e.reminderShown){let a=e.reminderTime-t;a<=0?(console.log("\u89E6\u53D1\u63D0\u9192:",e.title,"\u65F6\u95F4\u5DEE:",a,"ms"),await ty.info("\u89E6\u53D1\u4EFB\u52A1\u63D0\u9192",{taskId:e.id,title:e.title,timeDiff:a},"ReminderService"),t5(e),t3(e)):console.log("\u68C0\u67E5\u63D0\u9192:",e.title,"\u5269\u4F59\u65F6\u95F4:",Math.floor(a/1e3),"\u79D2")}})}catch(e){console.error("\u68C0\u67E5\u63D0\u9192\u65F6\u51FA\u9519:",e),await ty.error("\u68C0\u67E5\u63D0\u9192\u65F6\u51FA\u9519",{error:e.message},"ReminderService")}},t8=()=>{try{let e=localStorage.getItem("new-tab.task-list");return e?JSON.parse(e):[]}catch(e){return console.error("\u83B7\u53D6\u4EFB\u52A1\u5217\u8868\u5931\u8D25:",e),[]}},t5=async e=>{try{if(!("Notification"in window))return;"granted"===Notification.permission?(new Notification("\u23F0 \u4EFB\u52A1\u63D0\u9192",{body:`${e.title}
${e.description||"\u65E0\u63CF\u8FF0"}`,icon:"/favicon.ico",tag:`task-${e.id}`,requireInteraction:!0,badge:"/favicon.ico",vibrate:[200,100,200]}),console.log("\u5DF2\u53D1\u9001\u4EFB\u52A1\u63D0\u9192:",e.title),await ty.info("\u5DF2\u53D1\u9001\u4EFB\u52A1\u63D0\u9192\u901A\u77E5",{taskId:e.id,title:e.title},"ReminderService")):"denied"!==Notification.permission?Notification.requestPermission().then(async t=>{"granted"===t?t5(e):(console.log("\u7528\u6237\u62D2\u7EDD\u4E86\u901A\u77E5\u6743\u9650"),await ty.warn("\u7528\u6237\u62D2\u7EDD\u4E86\u901A\u77E5\u6743\u9650",null,"ReminderService"))}):(console.log("\u901A\u77E5\u6743\u9650\u88AB\u62D2\u7EDD\uFF0C\u65E0\u6CD5\u663E\u793A\u63D0\u9192"),await ty.warn("\u901A\u77E5\u6743\u9650\u88AB\u62D2\u7EDD\uFF0C\u65E0\u6CD5\u663E\u793A\u63D0\u9192",null,"ReminderService"))}catch(e){console.error("\u663E\u793A\u901A\u77E5\u5931\u8D25:",e),await ty.error("\u663E\u793A\u901A\u77E5\u5931\u8D25",{error:e.message},"ReminderService")}},t3=e=>{try{let t=t8(),a=t.findIndex(t=>t.id===e.id);-1!==a&&(t[a]={...t[a],reminderShown:!0,reminderShownTime:Date.now()},localStorage.setItem("new-tab.task-list",JSON.stringify(t)),console.log("\u5DF2\u6807\u8BB0\u63D0\u9192\u4E3A\u5DF2\u663E\u793A:",e.title))}catch(e){console.error("\u6807\u8BB0\u63D0\u9192\u5DF2\u663E\u793A\u65F6\u51FA\u9519:",e)}},t6=()=>{try{"Notification"in window&&"default"===Notification.permission&&Notification.requestPermission()}catch(e){console.error("\u8BF7\u6C42\u901A\u77E5\u6743\u9650\u5931\u8D25:",e)}},t9=()=>{if(!t0&&!t2)try{t0=window.setInterval(()=>{t4()},3e4),t4(),t1.value=!0,t2=!0}catch(e){console.error("\u542F\u52A8\u63D0\u9192\u670D\u52A1\u5931\u8D25:",e),t1.value=!1}},t7=()=>{t0&&(clearInterval(t0),t0=null),t1.value=!1},ae=()=>((0,h.bv)(async()=>{setTimeout(async()=>{t6(),t9(),console.log("\u5168\u5C40\u63D0\u9192\u670D\u52A1\u5DF2\u542F\u52A8"),await ty.info("\u5168\u5C40\u63D0\u9192\u670D\u52A1\u5DF2\u542F\u52A8",{checkInterval:3e4},"ReminderService")},1e3)}),(0,h.SK)(async()=>{t7(),console.log("\u5168\u5C40\u63D0\u9192\u670D\u52A1\u5DF2\u505C\u6B62"),await ty.info("\u5168\u5C40\u63D0\u9192\u670D\u52A1\u5DF2\u505C\u6B62",null,"ReminderService")}),{isActive:t1,start:t9,stop:t7,requestPermission:t6});var at=a("8218");(n=c||(c={})).springyEmojiCursor="springyEmojiCursor",n.fairyDustCursor="fairyDustCursor",n.snowflakeCursor="snowflakeCursor",n.characterCursor="characterCursor",n.trailingCursor="trailingCursor",n.followingDotCursor="followingDotCursor",n.bubbleCursor="bubbleCursor",n.emojiCursor="emojiCursor",n.ghostCursor="ghostCursor",n.rainbowCursor="rainbowCursor",n.clockCursor="clockCursor",n.textFlag="textFlag";let aa=null,ar=async e=>{let t=e;if(null==aa||aa.destroy(),!t&&(t=await eg("NEW_TAB_CURSOR_EFFECT")),!!t)switch(t){case"springyEmojiCursor":aa=(0,at.Gu)({});return;case"fairyDustCursor":aa=(0,at.f4)({});return;case"snowflakeCursor":aa=(0,at.be)({});return;case"characterCursor":aa=(0,at.Be)({});return;case"trailingCursor":aa=(0,at.n8)({});return;case"followingDotCursor":aa=(0,at.Y2)({});return;case"bubbleCursor":aa=(0,at.gR)({});return;case"emojiCursor":aa=(0,at.y5)({});return;case"ghostCursor":aa=(0,at.$N)({});return;case"rainbowCursor":aa=(0,at.Hy)({});return;case"clockCursor":aa=(0,at.N$)({});return;case"textFlag":aa=(0,at.$E)({});return}};let al=(i=ar,l=null,function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];l&&clearTimeout(l),l=setTimeout(()=>{i.apply(this,t)},200)});window.addEventListener("focus",()=>{al()});window.addEventListener("blur",()=>{null==aa||aa.destroy()});window.addEventListener("keydown",()=>{null==aa||aa.destroy()});window.addEventListener("keyup",()=>{al()});let ao=["src"],an={class:"toolbar"},ai={class:"toolbar-item"},as=[(0,h._)("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"currentColor"},[(0,h._)("path",{d:"M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M16.2,16.2L11,13V7H12.5V12.2L17,14.9L16.2,16.2Z"})],-1)],au={class:"toolbar-item"},ac=[(0,h._)("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"currentColor"},[(0,h._)("path",{d:"M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"})],-1)],ad={class:"toolbar-item"},am=(0,h._)("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"currentColor"},[(0,h._)("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M11,17H13V11H11V17Z"})],-1),av={key:0,class:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-pulse"},aw={class:"app flex flex-col gap-8"},ag={class:"flex flex-col items-center justify-center h-full"},ah={key:0,class:"width-[600]"},af={style:{width:"200px"}},ap={class:"settings"};(s=d||(d={})).Time="time",s.Task="task";let ay=(0,h.aZ)({__name:"NewTab",setup(e){let{unCompletedTaskCount:t}=(0,tW.useTaskManager)(),{isActive:a}=ae(),r=(e,t)=>(e=Math.ceil(e),Math.floor(Math.random()*((t=Math.floor(t))-e+1))+e),l=(0,h.iH)(),o=()=>{localStorage.setItem("new-tab.wai.deg",l.value.toString())},[n,i]=(0,_.Rr)("new-tab.work.mode",{defaultValue:"time"});(0,h.bv)(()=>{i(Math.random()>.5?"time":"task")});let[s,u]=(0,_.Rr)("new-tab.wai.mode",{defaultValue:"random"}),[c,d]=(0,_.Rr)("new-tab.background-image",{defaultValue:""}),m=(0,h.Fl)(()=>"task"===n.value),v=async e=>{let t=e?"task":"time";i(t),await ty.info("\u7528\u6237\u5207\u6362\u5DE5\u4F5C\u6A21\u5F0F",{from:n.value,to:t},"UserAction")},w=(0,h.Fl)(()=>"fixed"===s.value);(0,h.bv)(async()=>{ar(),l.value=localStorage.getItem("new-tab.wai.deg")?parseInt(localStorage.getItem("new-tab.wai.deg")):r(-120,120),await ty.init(),await ty.info("\u65B0\u6807\u7B7E\u9875\u5DF2\u52A0\u8F7D",{workMode:n.value},"NewTab")});let g=e=>{if(e){u("fixed"),localStorage.setItem("new-tab.wai.deg",l.value.toString());return}u("random"),localStorage.removeItem("new-tab.wai.deg"),l.value=r(-120,120)};(0,h.iH)({mouseover:[{selector:".vue3-live2d",texts:["\u8BF7\u67E5\u770B\u6E90\u4EE3\u7801\u4E86\u89E3\u5982\u4F55\u4FEE\u6539\u9ED8\u8BA4\u8BED\u53E5"]}]});let[k,U]=(0,_.Rr)("new-tab.live2d.model",{defaultValue:["Potion-Maker/Pio","school-2017-costume-yellow"]}),[x,C]=(0,_.Rr)("new-tab.live2d.visible",{defaultValue:!0}),T=(0,h.iH)(!1),D=e=>{T.value=e};(0,h.YP)(T,e=>{e?document.body.classList.add("bg-blur"):document.body.classList.remove("bg-blur")});let L=(0,h.iH)(),W=(0,h.iH)(!1),Z=async()=>{if(await ty.info("\u7528\u6237\u6253\u5F00\u8BBE\u7F6E\u9875\u9762",null,"UserAction"),location.href.includes("localhost")){window.open("/options");return}if(chrome){let e=chrome.runtime.getManifest().key,t="/build/options.html";e&&(t=t.replace("/build/","/")),chrome.tabs.create({url:t});return}},I=()=>{var e;null===(e=L.value)||void 0===e||e.openAbout()};return(e,a)=>((0,h.wg)(),(0,h.iD)(h.HY,null,[(0,h.SU)(c)?((0,h.wg)(),(0,h.iD)("img",{key:0,class:"background-item",src:(0,h.SU)(c),alt:"Bing\u6BCF\u65E5\u58C1\u7EB8UHD\u8D85\u9AD8\u6E05\u539F\u56FE"},null,8,ao)):(0,h.kq)("",!0),(0,h._)("div",an,[(0,h._)("div",ai,[(0,h._)("button",{onClick:a[0]||(a[0]=e=>v(!1)),class:(0,h.C_)(["toolbar-button",{active:!m.value}]),title:"\u65F6\u95F4\u6A21\u5F0F"},as,2)]),(0,h._)("div",au,[(0,h.Wm)((0,h.SU)(f.Z),{value:(0,h.SU)(t),max:99,"show-zero":!1,offset:[-3,3],color:"#ef4444","text-color":"white"},{default:(0,h.w5)(()=>[(0,h._)("button",{onClick:a[1]||(a[1]=e=>v(!0)),class:(0,h.C_)(["toolbar-button",{active:m.value}]),title:"\u5DE5\u4F5C\u6A21\u5F0F"},ac,2)]),_:1},8,["value"])]),(0,h._)("div",ad,[(0,h.Wm)((0,h.SU)(f.Z),{value:W.value?"NEW":"","show-zero":!1,offset:[-3,3],color:"#ef4444","text-color":"white",class:(0,h.C_)({"badge-animation":W.value})},{default:(0,h.w5)(()=>[(0,h._)("button",{onClick:I,class:"toolbar-button relative",title:"\u5173\u4E8E"},[am,W.value?((0,h.wg)(),(0,h.iD)("div",av)):(0,h.kq)("",!0)])]),_:1},8,["value","class"])])]),(0,h._)("div",aw,[(0,h.Wm)(eo,{onFocusChange:D}),(0,h._)("div",ag,[m.value?((0,h.wg)(),(0,h.j4)(tE,{key:1})):((0,h.wg)(),(0,h.iD)("div",{key:0,class:"m-t--16",style:(0,h.j5)(`transform: rotate(${-l.value}deg)`)},[(0,h.Wm)(tq),(0,h.Wm)(eA)],4))]),m.value?(0,h.kq)("",!0):((0,h.wg)(),(0,h.iD)("div",ah,[(0,h.Wm)((0,h.SU)(p.Z),{value:w.value,"onUpdate:value":[a[3]||(a[3]=e=>w.value=e),g],style:{"margin-bottom":"10px"}},{checked:(0,h.w5)(()=>[(0,h.Wm)((0,h.SU)(y.ZP),null,{trigger:(0,h.w5)(()=>[(0,h.Uk)(" \u56FA\u5B9A\u89D2\u5EA6 ")]),default:(0,h.w5)(()=>[(0,h._)("div",af,[(0,h.Wm)((0,h.SU)(b.Z),{value:l.value,"onUpdate:value":[a[2]||(a[2]=e=>l.value=e),o],min:-120,max:120},null,8,["value"])])]),_:1})]),unchecked:(0,h.w5)(()=>[(0,h.Uk)(" \u968F\u673A\u89D2\u5EA6 ")]),_:1},8,["value"])])),(0,h._)("div",ap,[(0,h.Wm)((0,h.SU)(S.ZP),{round:"",type:"primary",onClick:Z},{default:(0,h.w5)(()=>[(0,h.Uk)(" \u8BBE\u7F6E ")]),_:1}),(0,h.Wm)(eX,{bgImgSrc:(0,h.SU)(c),setBgImgSrc:(0,h.SU)(d)},null,8,["bgImgSrc","setBgImgSrc"])]),(0,h.Wm)(X,{ref_key:"aboutRef",ref:L,onUpdateStatus:a[4]||(a[4]=e=>W.value=e)},null,512),(0,h.Wm)(tX,{class:"live2d",width:300,height:300,resolution:2,style:{position:"fixed",bottom:0,right:0,zIndex:1},"api-path":"https://vue-live2d.demo.evgo2017.com/live2d-static-api/indexes",model:(0,h.SU)(k),setModel:(0,h.SU)(U),mainShow:(0,h.SU)(x),setMainShow:(0,h.SU)(C)},null,8,["model","setModel","mainShow","setMainShow"])])],64))}}),ab=(0,h.aZ)({__name:"App",setup:e=>(e,t)=>((0,h.wg)(),(0,h.j4)(ay))});"undefined"!=typeof window&&(window.debugHelper={checkLocalStorage(){try{let e=localStorage.getItem("new-tab.task-list");if(e){let t=JSON.parse(e);return console.log("\u4EFB\u52A1\u5217\u8868\u6570\u636E:",t),console.log("\u4EFB\u52A1\u6570\u91CF:",t.length),t}return null}catch(e){return console.error("\u68C0\u67E5localStorage\u5931\u8D25:",e),null}},clearCorruptedData(){try{localStorage.removeItem("new-tab.task-list"),console.log("\u5DF2\u6E05\u7406\u4EFB\u52A1\u6570\u636E")}catch(e){console.error("\u6E05\u7406\u6570\u636E\u5931\u8D25:",e)}},checkPerformance(){let e=performance.now(),t=this.checkLocalStorage(),a=performance.now();return console.log(`\u{6570}\u{636E}\u{8BFB}\u{53D6}\u{8017}\u{65F6}: ${a-e}ms`),t},async fixCorruptedTasks(){try{let{useTaskManager:e}=await Promise.resolve().then(a.bind(a,8622)),{fixCorruptedTasks:t}=e(),r=t();return console.log("\u5DF2\u4F7F\u7528 useTaskManager \u4FEE\u590D\u4EFB\u52A1\u6570\u636E"),console.log("\u8BF7\u5237\u65B0\u9875\u9762\u67E5\u770B\u6548\u679C"),r}catch(e){console.error("\u4FEE\u590D\u6570\u636E\u5931\u8D25:",e),this.clearCorruptedData()}},resetToDefault(){try{localStorage.setItem("new-tab.task-list",JSON.stringify([])),localStorage.setItem("new-tab.work.mode","time"),console.log("\u5DF2\u91CD\u7F6E\u5230\u9ED8\u8BA4\u72B6\u6001")}catch(e){console.error("\u91CD\u7F6E\u5931\u8D25:",e)}}}),v().extend(g()),(0,h.ri)(ab).mount("#app")}},t={};function a(r){var l=t[r];if(void 0!==l)return l.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(o.exports,o,o.exports,a),o.loaded=!0,o.exports}a.m=e,a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,{a:t}),t},a.d=function(e,t){for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.nmd=function(e){return e.paths=[],!e.children&&(e.children=[]),e},(()=>{var e=[];a.O=function(t,r,l,o){if(r){o=o||0;for(var n=e.length;n>0&&e[n-1][2]>o;n--)e[n]=e[n-1];e[n]=[r,l,o];return}for(var i=1/0,n=0;n<e.length;n++){for(var r=e[n][0],l=e[n][1],o=e[n][2],s=!0,u=0;u<r.length;u++)(!1&o||i>=o)&&Object.keys(a.O).every(function(e){return a.O[e](r[u])})?r.splice(u--,1):(s=!1,o<i&&(i=o));if(s){e.splice(n--,1);var c=l();void 0!==c&&(t=c)}}return t}})(),a.rv=function(){return"1.0.0-beta.5"},a.j="980",(()=>{var e={980:0};a.O.j=function(t){return 0===e[t]};var t=function(t,r){var l=r[0],o=r[1],n=r[2],i,s,u=0;if(l.some(function(t){return 0!==e[t]})){for(i in o)a.o(o,i)&&(a.m[i]=o[i]);if(n)var c=n(a)}for(t&&t(r);u<l.length;u++)s=l[u],a.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return a.O(c)},r=self.webpackChunknew_tab_extension=self.webpackChunknew_tab_extension||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),a.ruid="bundler=rspack@1.0.0-beta.5";var r=a.O(void 0,["139","707","72","53","968"],function(){return a("7884")});r=a.O(r)})();